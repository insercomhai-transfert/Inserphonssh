{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 1,
      "content": {
        "json": "# HDInsight HBase Insights\r\n"
      },
      "name": "text - 13"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Subscription}"
        ],
        "parameters": [
          {
            "id": "4795985f-0816-4c2b-b62a-1bd32592eaa2",
            "version": "KqlParameterItem/1.0",
            "name": "Cluster",
            "type": 5,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [
                "value::1"
              ],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 2592000000
            },
            "defaultValue": "value::1"
          },
          {
            "id": "d4b31cc2-42b2-4e10-839c-4497a93f250e",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "type": 4,
            "description": "The time range for which the below charts will be generated for",
            "isRequired": true,
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            },
            "timeContext": {
              "durationMs": 259200000
            },
            "value": {
              "durationMs": 300000
            }
          }
        ],
        "style": "above",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "name": "parameters - 3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "Azure Monitor"
        ],
        "parameters": [
          {
            "id": "e13111ba-4469-4f89-b58f-54011bf516bd",
            "version": "KqlParameterItem/1.0",
            "name": "usage",
            "type": 1,
            "isRequired": true,
            "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | take 1 | count as Count ),\r\n   ( table(T2) | take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightAmbariSystemMetrics';\r\nlet TableName2 = 'HDInsightAmbariClusterAlerts';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
            "isHiddenWhenLocked": true,
            "queryType": 0,
            "resourceType": "microsoft.hdinsight/clusters"
          },
          {
            "id": "fda9f4e7-2c05-47e6-965b-bb3a569c593d",
            "version": "KqlParameterItem/1.0",
            "name": "hbase_usage",
            "type": 1,
            "isRequired": true,
            "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | take 1 | count as Count ),\r\n   ( table(T2) | take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightHBaseLogs';\r\nlet TableName2 = 'HDInsightHBaseMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
            "crossComponentResources": [
              "{Cluster}"
            ],
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 0,
            "resourceType": "microsoft.hdinsight/clusters"
          },
          {
            "id": "5b28c1e7-3ffa-470b-b918-c4774e2726ba",
            "version": "KqlParameterItem/1.0",
            "name": "yarn_usage",
            "type": 1,
            "isRequired": true,
            "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | take 1 | count as Count ),\r\n   ( table(T2) | take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightHadoopAndYarnLogs';\r\nlet TableName2 = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
            "crossComponentResources": [
              "{Cluster}"
            ],
            "isHiddenWhenLocked": true,
            "queryType": 0,
            "resourceType": "microsoft.hdinsight/clusters"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.hdinsight/clusters"
      },
      "name": "parameters - 4"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "6ff9c06b-5550-4f8a-b0e5-0c80056ad8d6",
                  "cellValue": "top_tab",
                  "linkTarget": "parameter",
                  "linkLabel": "HBase",
                  "subTarget": "HBase",
                  "preText": "HBase Metrics",
                  "style": "link"
                },
                {
                  "id": "180342df-42f3-4906-81e3-a698b41b8815",
                  "cellValue": "top_tab",
                  "linkTarget": "parameter",
                  "linkLabel": "YARN",
                  "subTarget": "YARN",
                  "style": "link"
                },
                {
                  "id": "745e9667-6a67-4312-ae7a-686949845626",
                  "cellValue": "top_tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Hive",
                  "subTarget": "Hive",
                  "style": "link"
                },
                {
                  "id": "7f366bb6-e669-429c-8958-e11535aeb7c6",
                  "cellValue": "top_tab",
                  "linkTarget": "parameter",
                  "linkLabel": "System Metrics",
                  "subTarget": "SystemMetrics",
                  "style": "link"
                },
                {
                  "id": "405567b6-95a5-4874-9212-b5a80a43dfe1",
                  "cellValue": "top_tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Component Logs",
                  "subTarget": "ComponentLogs",
                  "style": "link"
                }
              ]
            },
            "name": "links - 20"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "51d9ef70-b56d-46af-bf4b-e65308e37282",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Region Server",
                        "subTarget": "RegionServer",
                        "style": "link"
                      },
                      {
                        "id": "0766a0d9-0f3f-4e27-bef9-fedf855cdd0f",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "HMaster",
                        "subTarget": "HMaster",
                        "style": "link"
                      },
                      {
                        "id": "2f254537-ec4d-461d-ac4c-3141882b71a4",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "JVM",
                        "subTarget": "JVM",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 21"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "f91f437b-555d-4990-bb5e-43a2dcf7baff",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Overview",
                              "subTarget": "Overview",
                              "style": "link"
                            },
                            {
                              "id": "e0a8925b-37fe-45af-8e60-30b7554c8816",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Requests",
                              "subTarget": "Requests",
                              "style": "link"
                            },
                            {
                              "id": "6c203174-01dd-4a8a-9ffd-81a9bc375eb4",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "BlockCache",
                              "subTarget": "BlockCache",
                              "style": "link"
                            },
                            {
                              "id": "1459192c-b215-4f2e-a458-5b72cec3d616",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "MemStore",
                              "subTarget": "MemStore",
                              "style": "link"
                            },
                            {
                              "id": "320ca29e-3b35-4b13-84a1-331bf42a7aa0",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "WAL",
                              "subTarget": "WAL",
                              "style": "link"
                            },
                            {
                              "id": "3c4630c0-680e-4aa4-b38f-dab880039846",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Compaction",
                              "subTarget": "Compaction",
                              "style": "link"
                            },
                            {
                              "id": "83a1bb10-c250-4354-9bbd-33f1bb7de360",
                              "cellValue": "hbase_region_server_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "RPC",
                              "subTarget": "RPC",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 10"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName == \"numRegionServers\" \r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                                "size": 4,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Region Server Status",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "tiles",
                                "tileSettings": {
                                  "showBorder": false,
                                  "titleContent": {
                                    "columnMatch": "MetricName",
                                    "formatter": 1
                                  },
                                  "leftContent": {
                                    "columnMatch": "avg_MetricValue",
                                    "formatter": 12,
                                    "formatOptions": {
                                      "palette": "auto"
                                    },
                                    "numberFormat": {
                                      "unit": 17,
                                      "options": {
                                        "maximumSignificantDigits": 3,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "33",
                              "name": "Region Server Status"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName == \"numDeadRegionServers\" \r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                                "size": 4,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Region Server Status",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "tiles",
                                "tileSettings": {
                                  "showBorder": false,
                                  "titleContent": {
                                    "columnMatch": "MetricName",
                                    "formatter": 1
                                  },
                                  "leftContent": {
                                    "columnMatch": "avg_MetricValue",
                                    "formatter": 12,
                                    "formatOptions": {
                                      "palette": "auto"
                                    },
                                    "numberFormat": {
                                      "unit": 17,
                                      "options": {
                                        "maximumSignificantDigits": 3,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "33",
                              "name": "Region Server Status - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName contains \"Num\" and MetricName contains \"RegionServers\"\r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated)\r\n| summarize PercentDeadRegionServers = avg((numDeadRegionServers/numRegionServers)*100) by bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 1\r\n\r\n",
                                "size": 4,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Dead Region Server Percentage",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "tiles",
                                "tileSettings": {
                                  "titleContent": {},
                                  "leftContent": {
                                    "columnMatch": "PercentDeadRegionServers",
                                    "formatter": 8,
                                    "formatOptions": {
                                      "min": 0,
                                      "max": 100,
                                      "palette": "red"
                                    },
                                    "numberFormat": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": false
                                      }
                                    }
                                  },
                                  "showBorder": false,
                                  "rowLimit": 1
                                },
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "33",
                              "name": "Dead Region Server Percentage"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"regionCount\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Region Count by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "name": "Region Count by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"storeFileSize\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Store File Size by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Store File Size by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"storeFileCount\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memstore File Count by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Memstore File Count by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"hlogFileSize\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "HLog File Size by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "HLog File Size by Host in Bytes"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"hlogFileCount\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "HLog File Count by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "HLog File Count by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"percentFilesLocal\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Percent Files Local",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Percent Files Local"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"splitQueueLength\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Split Queue Length",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Split Queue Length"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_region_server_tab",
                          "comparison": "isEqualTo",
                          "value": "Overview"
                        },
                        "name": "Region Server Overview"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Block Cache Metrics",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"blockCacheSize\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Size by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Size"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName contains \"blockCache\" and MetricName contains \"Size\"\r\n| evaluate pivot(MetricName, avg(MetricValue), HostName, TimeGenerated)\r\n| summarize BlockCacheFreePercentage = avg((blockCacheFreeSize/(blockCacheSize + blockCacheFreeSize))*100) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Free Percentage by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Free Percentage by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName contains \"blockCacheCount\" \r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, 1m)\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Blocks in Cache by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "name": "Number of Blocks in Cache by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"blockCacheCountHitPercent\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated,1m)\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Hit Percentage by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Hit Percentage by Host - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"blockCacheHitCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Hits Per Second by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Hit Per Second by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"blockCacheMissCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Misses Per Second by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Miss Per Second by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"blockCacheEvictionCount\"\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Block Cache Evictions Per Second",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Block Cache Evictions Per Second"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"l2CacheHitRatio\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "L2 Cache Hit Ratio",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "L2 Cache Hit Ratio"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"l2CacheMissRatio\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "L2 Cache Miss Ratio",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "L2 Cache Miss Ratio"
                            }
                          ]
                        },
                        "conditionalVisibilities": [
                          {
                            "parameterName": "Cluster",
                            "comparison": "isNotEqualTo"
                          },
                          {
                            "parameterName": "hbase_region_server_tab",
                            "comparison": "isEqualTo",
                            "value": "BlockCache"
                          }
                        ],
                        "name": "Block Cache"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Memstore Metrics",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"storeFileSize\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Store File Size by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Store File Size by Host - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"storeFileCount\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memstore File Count by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Memstore File Count by Host - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"memStoreSize\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memstore Size Per Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Memstore Size Per Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"flushedMemstoreBytes\"\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Flushed Memstore Bytes Per Second by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 11,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Flushed Memstore Bytes"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"flushQueueLength\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Flush Queue Length",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Flush Queue Length"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"FlushMemstoreSize\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memstore Flush Sizes",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Memstore Flush Sizes"
                            }
                          ]
                        },
                        "conditionalVisibilities": [
                          {
                            "parameterName": "Cluster",
                            "comparison": "isNotEqualTo"
                          },
                          {
                            "parameterName": "hbase_region_server_tab",
                            "comparison": "isEqualTo",
                            "value": "MemStore"
                          }
                        ],
                        "name": "Memstore"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 11,
                              "content": {
                                "version": "LinkItem/1.0",
                                "style": "tabs",
                                "links": [
                                  {
                                    "id": "732b6e45-16c5-4c8a-a675-a9b93a9b7472",
                                    "cellValue": "hbase_region_server_wal_tab",
                                    "linkTarget": "parameter",
                                    "linkLabel": "Operations",
                                    "subTarget": "Operations",
                                    "style": "link"
                                  },
                                  {
                                    "id": "7d0a65ef-ce8a-4f76-85d9-85c5e160b562",
                                    "cellValue": "hbase_region_server_wal_tab",
                                    "linkTarget": "parameter",
                                    "linkLabel": "Files",
                                    "subTarget": "Files",
                                    "style": "link"
                                  }
                                ]
                              },
                              "name": "links - 1"
                            },
                            {
                              "type": 12,
                              "content": {
                                "version": "NotebookGroup/1.0",
                                "groupType": "editable",
                                "title": "WAL Operation Metrics",
                                "items": [
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where MetricName contains \"SyncTime_num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n\r\n\r\n",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "WAL Syncs Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "WAL Syncs Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"SyncTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Sync Time Mean, Median, and Percentiles",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Sync Time Mean, Median, and Percentiles"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"SyncTime\" and MetricName contains \"TimeRange\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n|take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Sync Time Range Counts",
                                      "noDataMessage": "No sync operations occured yet.",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "barchart"
                                    },
                                    "name": "Sync Time Range Counts - Copy"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where MetricName == \"appendCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "WAL Append Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "WAL Append Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where MetricName contains \"appendCount\"\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), HostName, TimeGenerated)\r\n| summarize PercentSlowAppends = avg((slowAppendCount/appendCount)*100) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Slow Append Percentage by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 1,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Slow Append Count Percentage by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"AppendSize\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Append Size Mean, Median, and Percentiles",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 2,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Append Size Mean, Median, and Percentiles"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"AppendTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Append Time Mean, Median, and Percentiles in MS",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Append Time Mean, Median, and Percentiles"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"AppendTime\" and MetricName contains \"TimeRange\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Append Time Range Counts",
                                      "noDataMessage": "No append operations occurred yet.",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "barchart"
                                    },
                                    "name": "Append Time Range Counts"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName == \"rollRequest\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "WAL Roll Request Count Per Second by Host ",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "WAL Roll Request Count by Host "
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where TimeGenerated {TimeRange}\r\n| where MetricName contains \"RollRequest\"\r\n| evaluate pivot(MetricName, avg(MetricValue), HostName, TimeGenerated)\r\n| summarize PercentSlowApeends = avg((lowReplicaRollRequest/rollRequest)*100) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Low Replica Roll Request Percentage",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 1,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Low Replica Roll Request Percentage"
                                  }
                                ]
                              },
                              "conditionalVisibilities": [
                                {
                                  "parameterName": "hbase_region_server_wal_tab",
                                  "comparison": "isEqualTo",
                                  "value": "Operations"
                                },
                                {
                                  "parameterName": "Cluster",
                                  "comparison": "isNotEqualTo"
                                }
                              ],
                              "name": "WAL Operation Metrics"
                            },
                            {
                              "type": 12,
                              "content": {
                                "version": "NotebookGroup/1.0",
                                "groupType": "editable",
                                "title": "WAL File Metrics",
                                "items": [
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=WAL\"\r\n| where MetricName == \"writtenBytes\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated desc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Written Bytes Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 11,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Written Bytes by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=FileSystem\"\r\n| where MetricName contains \"num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Log Operations Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Log Operation Counts"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=FileSystem\"\r\n| where MetricName contains \"HLogSplitTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Meta\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "HLogSplitTime Mean, Median, Percentiles",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "HLogSplitTime Mean, Median, Percentiles"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=FileSystem\"\r\n| where MetricName contains \"HLogSplitTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName contains \"Meta\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "MetaHLogSplitTime Mean, Median, Percentiles",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "MetaHLogSplitTime Mean, Median, Percentiles"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=FileSystem\"\r\n| where MetricName contains \"HLogSplitSize\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Meta\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "HLogSplitSize Mean, Median, Percentiles ",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 2,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "HLogSplitSize Mean, Median, Percentiles "
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=FileSystem\"\r\n| where MetricName contains \"HLogSplitSize\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName contains \"Meta\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "MetaHLogSplitSize Mean, Median, Percentiles",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 2,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "MetaHLogSplitSize Mean, Median, Percentiles"
                                  }
                                ]
                              },
                              "conditionalVisibilities": [
                                {
                                  "parameterName": "Cluster",
                                  "comparison": "isNotEqualTo"
                                },
                                {
                                  "parameterName": "hbase_region_server_wal_tab",
                                  "comparison": "isEqualTo",
                                  "value": "Files"
                                }
                              ],
                              "name": "WAL File Metrics"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_region_server_tab",
                          "comparison": "isEqualTo",
                          "value": "WAL"
                        },
                        "name": "WAL"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 11,
                              "content": {
                                "version": "LinkItem/1.0",
                                "style": "tabs",
                                "links": [
                                  {
                                    "id": "82e308e0-3739-4d7f-a080-b777c9ba5d69",
                                    "cellValue": "hbase_region_server_requests",
                                    "linkTarget": "parameter",
                                    "linkLabel": "Counts",
                                    "subTarget": "Counts",
                                    "style": "link"
                                  },
                                  {
                                    "id": "84a9d39f-fae4-41f4-96fd-ee904ad74954",
                                    "cellValue": "hbase_region_server_requests",
                                    "linkTarget": "parameter",
                                    "linkLabel": "Latency",
                                    "subTarget": "Latency",
                                    "style": "link"
                                  }
                                ]
                              },
                              "name": "links - 2"
                            },
                            {
                              "type": 12,
                              "content": {
                                "version": "NotebookGroup/1.0",
                                "groupType": "editable",
                                "title": "Request Metrics",
                                "items": [
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName contains  \"RequestCount\"\r\n| summarize sum(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "All-Time Request Counts",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart"
                                    },
                                    "name": "All-Time Request Counts"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName contains  \"writeRequestCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Write Request Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Write Request Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName contains  \"readRequestCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Read Request Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Read Request Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Get_num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Get Request Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Get Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"slowGetCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Slow Get Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Slow Get Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"ScanSize_num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, filled_avg_metric_value/1.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "title": "Number of Scan Requests by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart"
                                    },
                                    "customWidth": "50",
                                    "name": "Scan Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"rpcMutateRequestCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, filled_avg_metric_value/1.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "title": "Mutate Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart"
                                    },
                                    "customWidth": "50",
                                    "name": "Mutate Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"Delete_num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Delete Requests Per Second  by Host ",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Delete Requests Per Second by Host "
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"slowDeleteCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Slow Delete Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart"
                                    },
                                    "customWidth": "50",
                                    "name": "Slow Delete Requests  Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"appendCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Append Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart"
                                    },
                                    "customWidth": "50",
                                    "name": "Append Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"slowAppendCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Slow Append Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Slow Append Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"Increment_num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Increment Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Increment Requests Per Second by Host"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"slowIncrementCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Slow Increment Requests Per Second by Host",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 31,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "customWidth": "50",
                                    "name": "Slow Increment Requests Per Second by Host"
                                  }
                                ]
                              },
                              "conditionalVisibilities": [
                                {
                                  "parameterName": "Cluster",
                                  "comparison": "isNotEqualTo"
                                },
                                {
                                  "parameterName": "hbase_region_server_requests",
                                  "comparison": "isEqualTo",
                                  "value": "Counts"
                                }
                              ],
                              "name": "Requests"
                            },
                            {
                              "type": 12,
                              "content": {
                                "version": "NotebookGroup/1.0",
                                "groupType": "editable",
                                "title": "Request Metrics",
                                "items": [
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Get\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Get  Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Get Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"ScanTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Scan Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Scan Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Mutate\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Mutate Operation Latencies",
                                      "noDataMessage": "The query returned no results. No mutate operations occurred yet.",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Mutate Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Delete\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Delete Operation Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Delete Operation Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Append\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, 1m)\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Append Operation Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Append Operation Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Increment\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Increment Operation Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Increment Operation Latencies in MS"
                                  },
                                  {
                                    "type": 3,
                                    "content": {
                                      "version": "KqlItem/1.0",
                                      "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"Replay\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                      "size": 0,
                                      "aggregation": 5,
                                      "showAnalytics": true,
                                      "title": "Replay Operation Latencies",
                                      "timeContext": {
                                        "durationMs": 0
                                      },
                                      "timeContextFromParameter": "TimeRange",
                                      "queryType": 0,
                                      "resourceType": "microsoft.hdinsight/clusters",
                                      "crossComponentResources": [
                                        "{Cluster}"
                                      ],
                                      "visualization": "linechart",
                                      "chartSettings": {
                                        "ySettings": {
                                          "numberFormatSettings": {
                                            "unit": 23,
                                            "options": {
                                              "style": "decimal",
                                              "useGrouping": true
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "name": "Replay Operation Latencies"
                                  }
                                ]
                              },
                              "conditionalVisibilities": [
                                {
                                  "parameterName": "Cluster",
                                  "comparison": "isNotEqualTo"
                                },
                                {
                                  "parameterName": "hbase_region_server_requests",
                                  "comparison": "isEqualTo",
                                  "value": "Latency"
                                }
                              ],
                              "name": "Request Latency"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_region_server_tab",
                          "comparison": "isEqualTo",
                          "value": "Requests"
                        },
                        "name": "Requests"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Compaction Metrics",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName contains \"compactionQueueLength\"\r\n|summarize avg(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Compaction Queue Length",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "name": "Compaction Queue Length by Host - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName contains \"compacted\" and MetricName contains \"bytes\"\r\n|summarize avg(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Total Compacted Bytes by Compaction Type",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Total Compacted Bytes by Compaction Type"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"MajorCompactionOutputFileCount_num_ops\"\r\n|summarize avg(MetricValue) by HostName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Major Compactions by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "name": "Number of Major Compactions by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"MajorCompactionTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Major Compaction Latencies",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Major Compaction Latencies"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"MajorCompactionInputFileCount\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "MajorCompaction Input File Counts ",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "customWidth": "50",
                              "name": "MajorCompaction Input File Counts "
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"MajorCompactionOutputFileCount\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Major Compaction Output File Counts ",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "customWidth": "50",
                              "name": "Major Compaction Output File Counts "
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"CompactionOutputSize_num_ops\"\r\n|summarize avg(MetricValue) by HostName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of  Compactions by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "name": "Number  Compactions by Host - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"CompactionTime\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Major\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Compaction Latencies",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Compaction Latencies - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"CompactionInputFileCount\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Major\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Compaction Input File Counts",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "customWidth": "50",
                              "name": "Compaction Input File Counts"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName contains \"CompactionOutputFileCount\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Major\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Compaction Output File Counts",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "customWidth": "50",
                              "name": "Compaction Output File Counts"
                            }
                          ]
                        },
                        "conditionalVisibilities": [
                          {
                            "parameterName": "Cluster",
                            "comparison": "isNotEqualTo"
                          },
                          {
                            "parameterName": "hbase_region_server_tab",
                            "comparison": "isEqualTo",
                            "value": "Compaction"
                          }
                        ],
                        "name": "Compaction"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Region Server RPC",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where MetricName == \"TotalCallTime_num_ops\"\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Operations Per Second by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Operations Per Second by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where MetricName == \"numActiveHandler\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Active Handlers by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Number of Active Handlers by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where MetricName == \"numOpenConnections\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Open RPC Connections by Host",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Number of Open RPC Connections by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where (MetricName contains \"numCallsIn\" and MetricName contains \"queue\") \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Queue Sizes",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "name": "RPC Queue Sizes"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where MetricName contains \"QueueCallTime\" and (MetricName contains \"percentile\" or MetricName contains \"median\" or MetricName contains \"mean\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Queue Latencies",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Queue Latencies"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=IPC\"\r\n| where MetricName contains \"ProcessCallTime\" and (MetricName contains \"percentile\" or MetricName contains \"median\" or MetricName contains \"mean\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Process Call Latencies ",
                                "timeContext": {
                                  "durationMs": 300000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Process Call Latencies "
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_region_server_tab",
                          "comparison": "isEqualTo",
                          "value": "RPC"
                        },
                        "name": "RPC"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "RegionServer"
                    },
                    {
                      "parameterName": "Cluster",
                      "comparison": "isNotEqualTo"
                    }
                  ],
                  "name": "Region Server"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "4c995ee3-200e-4f8d-ba75-a87e12475355",
                              "cellValue": "hbase_master_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Region Assignment",
                              "subTarget": "RegionAssignment",
                              "style": "link"
                            },
                            {
                              "id": "36d1bc16-95fa-4a2a-bb41-0a6a8157fc2c",
                              "cellValue": "hbase_master_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "RPC",
                              "subTarget": "RPC",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 1"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Region Assignment Metrics",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"ritCount\"\r\n| order by TimeGenerated desc\r\n| take 1",
                                "size": 0,
                                "showAnalytics": true,
                                "title": "Regions In Transition Count",
                                "noDataMessage": "No regions in transition currently.",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "tiles",
                                "tileSettings": {
                                  "titleContent": {
                                    "columnMatch": "MetricName",
                                    "formatter": 1
                                  },
                                  "leftContent": {
                                    "columnMatch": "MetricValue",
                                    "formatter": 12,
                                    "formatOptions": {
                                      "palette": "auto"
                                    },
                                    "numberFormat": {
                                      "unit": 17,
                                      "options": {
                                        "style": "decimal",
                                        "maximumFractionDigits": 2,
                                        "maximumSignificantDigits": 3
                                      }
                                    }
                                  },
                                  "showBorder": true
                                }
                              },
                              "customWidth": "20",
                              "name": "Regions In Transition Count"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"ritCount\"\r\n|project TimeGenerated, ClusterName, MetricValue\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "noDataMessage": "No regions in transition yet.",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "tileSettings": {
                                  "titleContent": {
                                    "columnMatch": "MetricName",
                                    "formatter": 1
                                  },
                                  "leftContent": {
                                    "columnMatch": "MetricValue",
                                    "formatter": 12,
                                    "formatOptions": {
                                      "palette": "auto"
                                    },
                                    "numberFormat": {
                                      "unit": 17,
                                      "options": {
                                        "style": "decimal",
                                        "maximumFractionDigits": 2,
                                        "maximumSignificantDigits": 3
                                      }
                                    }
                                  },
                                  "showBorder": true
                                }
                              },
                              "customWidth": "80",
                              "name": "Regions In Transition Count Graph"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace contains \"Hadoop:service=HBase,name=Master,sub=Assignment\"\r\n| where MetricName contains \"num_ops\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Assignment Operations Per Second by Host",
                                "noDataMessage": "No assignments have occurred yet.",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "Assignment Operations Per Second by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace contains \"Hadoop:service=HBase,name=Master,sub=Assignment\"\r\n| where MetricName contains \"Assign\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName !contains \"Bulk\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Assign Operation Mean, Median, Percentile",
                                "noDataMessage": "No assignments have been made yet.",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Assign Operation Mean, Median, Percentile in MS"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace contains \"Hadoop:service=HBase,name=Master,sub=Assignment\"\r\n| where MetricName contains \"Assign\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\") and MetricName contains \"Bulk\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Bulk Assign Operation Mean, Median, Percentile",
                                "noDataMessage": "No bulk assigns have been made yet.",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Bulk Assign Operation Mean, Median, Percentile in MS "
                            }
                          ]
                        },
                        "conditionalVisibilities": [
                          {
                            "parameterName": "hbase_master_tab",
                            "comparison": "isEqualTo",
                            "value": "RegionAssignment"
                          },
                          {
                            "parameterName": "Cluster",
                            "comparison": "isNotEqualTo"
                          }
                        ],
                        "name": "Region Assignment"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "HMaster RPC",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where MetricName == \"TotalCallTime_num_ops\"\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Operations Per Second by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Operations Per Second by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where MetricName == \"numActiveHandler\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Active Handlers by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Number of Active Handlers by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where MetricName == \"numOpenConnections\"\r\n| summarize avg(MetricValue) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Open RPC Connections by Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Number of Open RPC Connections by Host"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where (MetricName contains \"numCallsIn\" and MetricName contains \"queue\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Queue Sizes",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "unstackedbar"
                              },
                              "name": "RPC Queue Sizes"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where MetricName contains \"QueueCallTime\" and (MetricName contains \"percentile\" or MetricName contains \"median\" or MetricName contains \"mean\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Queue Latencies",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Queue Latencies"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=IPC\"\r\n| where MetricName contains \"ProcessCallTime\" and (MetricName contains \"percentile\" or MetricName contains \"median\" or MetricName contains \"mean\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "RPC Process Call Latencies ",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "RPC Process Call Latencies "
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_master_tab",
                          "comparison": "isEqualTo",
                          "value": "RPC"
                        },
                        "name": "RPC HMaster"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "hbase_tab",
                    "comparison": "isEqualTo",
                    "value": "HMaster"
                  },
                  "name": "HMaster"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "parameters": [
                            {
                              "id": "aa7b52fb-0130-4b7f-a34a-a212b473d176",
                              "version": "KqlParameterItem/1.0",
                              "name": "Component",
                              "type": 2,
                              "description": "Component to get JVM metrics for",
                              "isRequired": true,
                              "value": "wn",
                              "typeSettings": {
                                "additionalResourceOptions": [],
                                "showDefault": false
                              },
                              "jsonData": "[\r\n    { \"value\":\"wn\", \"label\":\"RegionServer\" },\r\n    { \"value\":\"zk\", \"label\":\"HMaster\" }\r\n]",
                              "timeContext": {
                                "durationMs": 86400000
                              }
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces"
                        },
                        "name": "parameters - 1"
                      },
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "bf396c4e-b06f-44cc-903b-2603dd7e9a1e",
                              "cellValue": "hbase_jvm_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory",
                              "subTarget": "Memory",
                              "style": "link"
                            },
                            {
                              "id": "f0fb77a6-075f-47d2-b015-d123379b5e30",
                              "cellValue": "hbase_jvm_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Garbage Collection",
                              "subTarget": "GarbageCollection",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 9"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\") and MetricName == \"MemHeapUsedM\" \r\n| summarize avg(MetricValue) by HostName,bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "JVM Heap Usage in MB",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\") and MetricName == \"MemNonHeapUsedM\" \r\n| summarize avg(MetricValue) by HostName,bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "JVM Non-Heap Usage in MB",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\")\r\n| where MetricName contains \"MemHeap\"\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, HostName)\r\n| summarize PercentHeapUsage = avg((MemHeapUsedM/MemHeapMaxM)*100) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "JVM Heap Memory Used Percentage ",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "tileSettings": {
                                  "showBorder": false
                                },
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "conditionalVisibility": {
                                "parameterName": "Cluster",
                                "comparison": "isNotEqualTo"
                              },
                              "name": "JVM Heap Memory Used Percentage "
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where ClusterName == '{Cluster:label}' and HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\")\r\n| where MetricName contains \"MemNonHeap\"\r\n| evaluate pivot(MetricName, avg(MetricValue), HostName, TimeGenerated)\r\n| summarize PercentHeapUsage = avg((MemNonHeapUsedM/MemNonHeapCommittedM)*100) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated desc\r\n| take 10000\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "JVM Non-Heap Memory Used Percentage",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "tileSettings": {
                                  "showBorder": false
                                },
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "conditionalVisibility": {
                                "parameterName": "Cluster",
                                "comparison": "isNotEqualTo"
                              },
                              "name": "JVM Non-Heap Memory Used Percentage"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_jvm_tab",
                          "comparison": "isEqualTo",
                          "value": "Memory"
                        },
                        "name": "Memory"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\")\r\n| where MetricName == \"GcCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Garbage Collections By Host",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 31,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 5"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' and (Tags contains \"RegionServer\" or Tags contains \"Master\" or Tags contains \"IO\")\r\n| evaluate pivot(MetricName, avg(MetricValue),TimeGenerated, ClusterName, HostName)\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(GcCount) default=double(null), avg(GcTimeMillis) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_count_value = series_fill_forward(avg_GcCount), filled_avg_time_value = series_fill_forward(avg_GcTimeMillis)\r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_count_value to typeof(double), filled_avg_time_value to typeof(double)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_time_value - prev(filled_avg_time_value, 1))/(filled_avg_count_value - prev(filled_avg_count_value, 1)) , 0.0)\r\n| extend RateOfChangeNoNan = iif(isnan(RateOfChange), 0.0, RateOfChange)\r\n| project TimeGenerated, HostName, RateOfChangeNoNan\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Mean Time Per Collection in MS",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 4"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where HostName startswith '{Component}' \r\n| where MetricName contains \"PauseTimeWithGc\" and (MetricName contains \"percentile\" or MetricName contains \"mean\" or MetricName contains \"median\")\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "GC Pause Time Latencies",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "tileSettings": {
                                  "showBorder": false
                                },
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "Cluster",
                                "comparison": "isNotEqualTo"
                              },
                              "name": "GC Pause Time Latencies in MS"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_jvm_tab",
                          "comparison": "isEqualTo",
                          "value": "GarbageCollection"
                        },
                        "name": "Garbage Collection"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "hbase_tab",
                    "comparison": "isEqualTo",
                    "value": "JVM"
                  },
                  "name": "HBase JVM"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "top_tab",
                "comparison": "isEqualTo",
                "value": "HBase"
              },
              {
                "parameterName": "hbase_usage",
                "comparison": "isEqualTo",
                "value": "present"
              }
            ],
            "name": "HBase"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "a04ba5c0-6c78-4a99-a7ca-78ddbd3f57c0",
                        "cellValue": "yarn_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Overview",
                        "subTarget": "Overview",
                        "style": "link"
                      },
                      {
                        "id": "ccae0674-d61e-46ee-904d-14a6b58dc883",
                        "cellValue": "yarn_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Apps",
                        "subTarget": "Apps",
                        "preText": "",
                        "style": "link"
                      },
                      {
                        "id": "3a013ca8-11d2-4ca8-af6d-b15b80d7a042",
                        "cellValue": "yarn_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Node Managers",
                        "subTarget": "NodeManagers",
                        "style": "link"
                      },
                      {
                        "id": "e47483ee-fb27-459d-abcb-ace7081a7c66",
                        "cellValue": "yarn_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "JVM",
                        "subTarget": "JVM",
                        "style": "link"
                      },
                      {
                        "id": "e9e32c59-5d4c-4eed-8dd0-bc8b0dcc3d91",
                        "cellValue": "yarn_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Timeline Server",
                        "subTarget": "TimelineServer",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 0"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Yarn App Metrics",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName contains \"Apps\" \r\n| summarize arg_max(TimeGenerated,*) by MetricNamespace, MetricName\r\n| summarize sum(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "title": "App States",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "name": "App States"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"AMLaunchDelayAvgTime\"\r\n| summarize arg_max(TimeGenerated,*) by MetricNamespace, MetricName\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Avg AM Launch Delay Time in MS",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "Avg AM Launch Delay Time in MS"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"AMRegisterDelayAvgTime\"\r\n| summarize arg_max(TimeGenerated,*) by MetricNamespace, MetricName\r\n| summarize sum(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Avg AM Register Delay Time in MS",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "Avg AM Register Delay Time in MS"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "Cluster",
                      "comparison": "isNotEqualTo"
                    },
                    {
                      "parameterName": "yarn_tab",
                      "comparison": "isEqualTo",
                      "value": "Apps"
                    }
                  ],
                  "name": "Apps"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Node Manager",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "c78d5501-b3ce-4f09-aa35-97a49527cf77",
                              "cellValue": "nm_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Containers",
                              "subTarget": "Containers",
                              "style": "link"
                            },
                            {
                              "id": "f2078e19-2d79-4ab5-857c-ebc8c8495a53",
                              "cellValue": "nm_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory",
                              "subTarget": "Memory",
                              "style": "link"
                            },
                            {
                              "id": "01bcba1f-b799-4819-a3ff-4b8556c63795",
                              "cellValue": "nm_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Disk",
                              "subTarget": "Disk",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 1"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Node Manager Containers",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace contains \"NodeManager\" and (MetricName == \"ContainersRunning\" or MetricName == \"ContainersCompleted\" or MetricName == \"ContainersKilled\" or MetricName == \"ContainersFailed\")\r\n| summarize max(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Container States",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "name": "Container States"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"ContainerLaunchDurationAvgTime\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Average Container Launch Delay in MS",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xSettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  },
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "query - 2"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "nm_tab",
                          "comparison": "isEqualTo",
                          "value": "Containers"
                        },
                        "name": "Containers"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Node Manager Memory",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"AvailableGB\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memory Available",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 5,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"AllocatedGB\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Memory Allocated",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 5,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "nm_tab",
                          "comparison": "isEqualTo",
                          "value": "Memory"
                        },
                        "name": "Node Manager Memory"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Node Manager Disk",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"GoodLogDirsDiskUtilizationPerc\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Disk Utilization for Good Log Dirs",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true,
                                        "maximumSignificantDigits": 3
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"GoodLocalDirsDiskUtilizationPerc\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Disk Utilization for Good Local Dirs",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true,
                                        "maximumSignificantDigits": 3
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"BadLogDirs\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Num Bad Log Dirs",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains \"NodeManager\" and MetricName == \"BadLocalDirs\"\r\n| take 10000\r\n| project ClusterName, TimeGenerated, MetricValue",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Num Bad Local Dirs",
                                "timeContext": {
                                  "durationMs": 14400000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Cluster}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "nm_tab",
                          "comparison": "isEqualTo",
                          "value": "Disk"
                        },
                        "name": "Node Manager Disk"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "Cluster",
                      "comparison": "isNotEqualTo"
                    },
                    {
                      "parameterName": "yarn_tab",
                      "comparison": "isEqualTo",
                      "value": "NodeManagers"
                    }
                  ],
                  "name": "Node Manager"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "YARN Cluster Overview",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"NumActiveNMs\"\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "title": "Active Nodes",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 0",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"AvailableMB\"\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "title": "Cluster Memory Available",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Cluster Memory Available",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"AppsRunning\"\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "title": "Running Apps",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 0,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Running Apps",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"MemHeapUsedM\"\r\n| order by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "title": "Resource Manager Heap Usage",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Resource Manager Heap",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"NumActiveNMs\" or MetricName == \"NumUnhealthyNMs\" or MetricName == \"NumLostNMs\" or MetricName == \"NumDecommisionedNMs\" or MetricName == \"NumRebootedNMs\" \r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Node States",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "query - 4"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"AppsRunning\" or MetricName == \"AppsPending\" or MetricName == \"AppsFailed\" or MetricName == \"AppsComplete\" or MetricName == \"AppsSubmitted\" \r\n| summarize arg_max(TimeGenerated,*) by MetricNamespace, MetricName\r\n| summarize sum(MetricValue) by MetricName, bin(TimeGenerated,{TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "App States",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "query - 4 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"AvailableMB\"// and MetricNamespace == \"Hadoop:service=ResourceManager,name=QueueMetrics,q0=root\"\r\n| summarize MetricValue=max(MetricValue) by MetricNamespace, bin(TimeGenerated, {TimeRange:grain})\r\n| extend MetricNamespace = substring(MetricNamespace, 36)\r\n| order by TimeGenerated desc\r\n| take 10000\r\n| project MetricNamespace, TimeGenerated, MetricValue\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Cluster Memory Available",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          },
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "name": "Cluster Memory Available - Copy",
                        "styleSettings": {
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "yarn_tab",
                    "comparison": "isEqualTo",
                    "value": "Overview"
                  },
                  "name": "Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "YARN JVM",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "parameters": [
                            {
                              "id": "aa7b52fb-0130-4b7f-a34a-a212b473d176",
                              "version": "KqlParameterItem/1.0",
                              "name": "Component",
                              "type": 2,
                              "description": "Component to get JVM metrics for",
                              "isRequired": true,
                              "value": "NodeManager",
                              "typeSettings": {
                                "additionalResourceOptions": [],
                                "showDefault": false
                              },
                              "jsonData": "[\r\n    { \"value\":\"NodeManager\", \"label\":\"NodeManager\" },\r\n    { \"value\":\"ResourceManager\", \"label\":\"ResourceManager\" },\r\n    { \"value\":\"ApplicationHistoryServer\", \"label\":\"TimelineServer\"},\r\n    { \"value\":\"JobHistoryServer\", \"label\":\"JobHistoryServer\"}\r\n]",
                              "timeContext": {
                                "durationMs": 86400000
                              }
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 1"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains '{Component}' and MetricName == \"MemHeapUsedM\" \r\n| summarize avg(MetricValue) by HostName,bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "JVM Heap Usage in MB",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 0"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains '{Component}' and MetricName == \"MemNonHeapUsedM\" \r\n| summarize avg(MetricValue) by HostName,bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "JVM Non-Heap Usage in MB",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 4,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 0 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace contains '{Component}'\r\n| where MetricName == \"GcCount\"\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(MetricValue) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_MetricValue) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Garbage Collections By Host",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 31,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 5"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}' and MetricNamespace contains \"{Component}\" and MetricName contains \"Gc\"\r\n| evaluate pivot(MetricName, avg(MetricValue),TimeGenerated, ClusterName, HostName)\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(GcCount) default=double(null), avg(GcTimeMillis) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_count_value = series_fill_forward(avg_GcCount), filled_avg_time_value = series_fill_forward(avg_GcTimeMillis)\r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_count_value to typeof(double), filled_avg_time_value to typeof(double)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_time_value - prev(filled_avg_time_value, 1))/(filled_avg_count_value - prev(filled_avg_count_value, 1)) , 0.0)\r\n| extend RateOfChangeNoNan = iif(isnan(RateOfChange), 0.0, RateOfChange)\r\n| project TimeGenerated, HostName, RateOfChangeNoNan\r\n\r\n\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Mean Time Per Collection in MS",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 4"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "yarn_tab",
                    "comparison": "isEqualTo",
                    "value": "JVM"
                  },
                  "name": "YARN JVM"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "YARN Timeline Server",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"GetEntitiesTotal\"\r\n| project ClusterName, TimeGenerated, MetricValue",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Timeline Entity Data Reads",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Timeline Entity Data Reads"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"GetEntitiesTimeAvgTime\"\r\n| project ClusterName, TimeGenerated, MetricValue",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Average Timeline Entity Data Read Time",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "Average Timeline Entity Data Read Time"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"PostEntitiesTotal\"\r\n| project ClusterName, TimeGenerated, MetricValue",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Timeline Entity Data Writes",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Timeline Entity Data Writes"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where MetricName == \"PostEntitiesTimeAvgTime\"\r\n| project ClusterName, TimeGenerated, MetricValue",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Average Timeline Entity Data Write Time",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "Average Timeline Entity Data Write Time"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "yarn_tab",
                    "comparison": "isEqualTo",
                    "value": "TimelineServer"
                  },
                  "name": "YARN Timeline Server"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "top_tab",
                "comparison": "isEqualTo",
                "value": "YARN"
              },
              {
                "parameterName": "yarn_usage",
                "comparison": "isEqualTo",
                "value": "present"
              }
            ],
            "name": "Yarn"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "System Metrics",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "623b56d9-85b7-4708-b6f5-096f91d8a697",
                        "cellValue": "metrics_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Disk",
                        "subTarget": "Disk",
                        "preText": "Disk",
                        "style": "link"
                      },
                      {
                        "id": "7906c8da-965b-4910-9823-44f4e17d40fa",
                        "cellValue": "metrics_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "CPU",
                        "subTarget": "CPU",
                        "style": "link"
                      },
                      {
                        "id": "9cf5e622-416e-4714-8f04-55e13dded4b4",
                        "cellValue": "metrics_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Memory",
                        "subTarget": "Memory",
                        "style": "link"
                      },
                      {
                        "id": "8e2525b1-e020-4f04-a2fc-d9154b2d3640",
                        "cellValue": "metrics_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Load",
                        "subTarget": "Load",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 4"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Disk",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| extend NodeType = substring(HostName,0,2)\r\n| summarize DiskPercentUsed = (1 - sum(DiskFree)/sum(DiskTotal))*100 by NodeType, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Disk Usage Percentage by Node Type",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "DiskPercentFree",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "percent",
                                    "useGrouping": false
                                  }
                                }
                              }
                            ]
                          },
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 1,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 0"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| summarize  DiskPercentUsed = (1 - sum(DiskFree)/sum(DiskTotal))*100, DiskUsedGB=avg(DiskTotal - DiskFree) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n| order by TimeGenerated, HostName desc\r\n| summarize arg_max(TimeGenerated, *) by HostName\r\n| sort by DiskPercentUsed desc\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Disk Used Percentage by Host",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "DiskPercentUsed",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 100,
                                  "palette": "greenRed"
                                },
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false,
                                    "maximumSignificantDigits": 3
                                  }
                                }
                              },
                              {
                                "columnMatch": "DiskUsedGB",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false,
                                    "maximumFractionDigits": 2
                                  }
                                }
                              }
                            ],
                            "sortBy": [
                              {
                                "itemKey": "$gen_heatmap_DiskPercentUsed_2",
                                "sortOrder": 2
                              }
                            ]
                          },
                          "sortBy": [
                            {
                              "itemKey": "$gen_heatmap_DiskPercentUsed_2",
                              "sortOrder": 2
                            }
                          ]
                        },
                        "customWidth": "50",
                        "name": "Disk Usage Per Host"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(ReadCount) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_ReadCount) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Disk Read Count Per Second by Host",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "Disk Read Count Per Second"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| where TimeGenerated {TimeRange}\r\n| make-series avg(WriteCount) default=double(null) on TimeGenerated in range({TimeRange:start} , {TimeRange:end}, {TimeRange:grain}) by HostName\r\n| extend filled_avg_metric_value = series_fill_forward(avg_WriteCount) \r\n| mv-expand TimeGenerated to typeof(datetime), filled_avg_metric_value to typeof(int)\r\n| order by HostName desc,TimeGenerated asc \r\n| extend RateOfChange = iif(prev(HostName) == HostName, (filled_avg_metric_value - prev(filled_avg_metric_value, 1))/60.0, 0.0)\r\n| project TimeGenerated, HostName, RateOfChange",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Disk Write Count Per Second by Host",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "Disk Write Count Per Second by Host"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "Cluster",
                      "comparison": "isNotEqualTo"
                    },
                    {
                      "parameterName": "metrics_tab",
                      "comparison": "isEqualTo",
                      "value": "Disk"
                    }
                  ],
                  "name": "Disk"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "CPU Metrics",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| extend NodeType = substring(HostName,0,2)\r\n| summarize CPUUsagePercentage = avg(100 - CpuIdle) by NodeType, bin(TimeGenerated, {TimeRange:grain})\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "CPU Usage Percentage by Node Type",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 1,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "CPU Usage Percentage by Node Type"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| summarize CPUUsagePercentage = avg(100 - CpuIdle) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| summarize arg_max(TimeGenerated, *) by HostName\r\n| sort by CPUUsagePercentage desc",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "CPU Usage Percentage by Host",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "CPUUsagePercentage",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 100,
                                  "palette": "greenRed"
                                },
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false,
                                    "maximumSignificantDigits": 3
                                  }
                                }
                              }
                            ],
                            "sortBy": [
                              {
                                "itemKey": "$gen_heatmap_CPUUsagePercentage_2",
                                "sortOrder": 2
                              }
                            ]
                          },
                          "sortBy": [
                            {
                              "itemKey": "$gen_heatmap_CPUUsagePercentage_2",
                              "sortOrder": 2
                            }
                          ]
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "CPU Usage Percentage by Host"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "metrics_tab",
                    "comparison": "isEqualTo",
                    "value": "CPU"
                  },
                  "name": "CPU"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Memory Metrics",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| extend NodeType = substring(HostName,0,2)\r\n| summarize FreeMemory = avg(FreeMemory) by NodeType, bin(TimeGenerated, {TimeRange:grain})\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Free Memory in Bytes by Node Type",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 2,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "Free Memory in Bytes by Node Type"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| summarize MemoryUsedPercentage = (1 - sum(FreeMemory)/sum(TotalMemory))*100 by  HostName, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| summarize arg_max(TimeGenerated, *) by HostName\r\n| sort by MemoryUsedPercentage desc",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Memory Usage Percentage by Host",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "MemoryUsedPercentage",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 100,
                                  "palette": "greenRed"
                                },
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false,
                                    "maximumSignificantDigits": 3
                                  }
                                }
                              }
                            ]
                          }
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "Memory Usage Percentage by Host"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "metrics_tab",
                    "comparison": "isEqualTo",
                    "value": "Memory"
                  },
                  "name": "Memory"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Load Metrics",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| extend NodeType = substring(HostName,0,2)\r\n| summarize OneMinuteLoad = avg(OneMinuteLoad) by NodeType, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "One Minute Load by Node Type",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "query - 0"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| summarize OneMinuteLoad = avg(OneMinuteLoad) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| summarize arg_max(TimeGenerated, *) by HostName\r\n| sort by OneMinuteLoad desc",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "One Minute Load by Node",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "OneMinuteLoad",
                                "formatter": 8,
                                "formatOptions": {
                                  "palette": "red"
                                }
                              }
                            ]
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 0 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| extend NodeType = substring(HostName,0,2)\r\n| summarize FiveMinuteLoad = avg(FiveMinuteLoad) by NodeType, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Five Minute Load by Node Type",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "query - 0 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightAmbariSystemMetrics\r\n| summarize FiveMinuteLoad = avg(FiveMinuteLoad) by HostName, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| summarize arg_max(TimeGenerated, *) by HostName\r\n| sort by FiveMinuteLoad desc",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Five Minute Load by Node",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "FiveMinuteLoad",
                                "formatter": 8,
                                "formatOptions": {
                                  "palette": "red"
                                }
                              }
                            ]
                          }
                        },
                        "customWidth": "50",
                        "name": "query - 0 - Copy - Copy"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "metrics_tab",
                    "comparison": "isEqualTo",
                    "value": "Load"
                  },
                  "name": "Load"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "Cluster",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "top_tab",
                "comparison": "isEqualTo",
                "value": "SystemMetrics"
              }
            ],
            "name": "System Metrics"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Component Logs",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "65b7815f-babd-4335-908a-406548c52929",
                        "cellValue": "log_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "HBase",
                        "subTarget": "HBase",
                        "style": "link"
                      },
                      {
                        "id": "c03b9aa0-ba22-46ed-95a8-062499fea951",
                        "cellValue": "log_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Hadoop And Yarn",
                        "subTarget": "HadoopAndYarn",
                        "preText": "HadoopAndYarn",
                        "style": "link"
                      },
                      {
                        "id": "223f475a-21ac-42db-9cdd-ece2ed259ed3",
                        "cellValue": "log_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Hive And LLAP",
                        "subTarget": "HiveAndLLAP",
                        "style": "link"
                      },
                      {
                        "id": "6cc6ac97-f9f6-4f01-802b-59cd60ead1b8",
                        "cellValue": "log_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Oozie",
                        "subTarget": "Oozie",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 5"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "parameters": [
                            {
                              "id": "d209cf7b-ddb7-4ec2-9e8b-e5772d397d5d",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnLogType",
                              "label": "LogType",
                              "type": 2,
                              "description": "Log Types that will show in the table",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHadoopAndYarnLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogType\r\n| order by LogType\r\n| project LogType, label=LogType, selected=row_number()",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "e3973cc7-67a7-46e3-b0e5-b6b5dd0b392e",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnLogLevel",
                              "label": "LogLevel",
                              "type": 2,
                              "description": "Log Level of Logs returned in queries",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHadoopAndYarnLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogLevel",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "686bc2e9-cceb-45c6-86b5-de58babe71f5",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnNumberofLogs",
                              "type": 1,
                              "description": "Number of Logs that will be returned in query",
                              "isRequired": true,
                              "value": "20",
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "label": "NumberofLogs"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 6"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnLogs\r\n| where ClusterName == '{Cluster:label}'\r\n| where LogType in ({HadoopAndYarnLogType}) and LogLevel in ({HadoopAndYarnLogLevel})\r\n| take {HadoopAndYarnNumberofLogs}\r\n| project TimeGenerated, LogType, LogLevel ,Message\r\n|order by TimeGenerated desc",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "Hadoop and Yarn Logs",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Message",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "230.1429ch"
                                }
                              }
                            ]
                          }
                        },
                        "name": "Hadoop and Yarn Logs"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnLogs\r\n| where LogType in ({HadoopAndYarnLogType}) and LogLevel in ({HadoopAndYarnLogLevel})\r\n| summarize count() by LogLevel, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Log Level Counts",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "INFO",
                                "label": "Info",
                                "color": "green"
                              },
                              {
                                "seriesName": "ERROR",
                                "label": "Error",
                                "color": "redBright"
                              },
                              {
                                "seriesName": "WARN",
                                "label": "Warning",
                                "color": "yellow"
                              }
                            ]
                          }
                        },
                        "name": "Log Level Counts"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "log_tab",
                    "comparison": "isEqualTo",
                    "value": "HadoopAndYarn"
                  },
                  "name": "Hadoop And Yarn Logs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "parameters": [
                            {
                              "id": "d209cf7b-ddb7-4ec2-9e8b-e5772d397d5d",
                              "version": "KqlParameterItem/1.0",
                              "name": "HBaseLogType",
                              "label": "LogType",
                              "type": 2,
                              "description": "Log Types that will show in the table",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHBaseLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogType\r\n| order by LogType\r\n| project LogType, label=LogType, selected=row_number()",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "e3973cc7-67a7-46e3-b0e5-b6b5dd0b392e",
                              "version": "KqlParameterItem/1.0",
                              "name": "HBaseLogLevel",
                              "label": "LogLevel",
                              "type": 2,
                              "description": "Log Level of Logs returned in queries",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHBaseLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogLevel",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::3",
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "686bc2e9-cceb-45c6-86b5-de58babe71f5",
                              "version": "KqlParameterItem/1.0",
                              "name": "HBaseNumberofLogs",
                              "type": 1,
                              "description": "Number of Logs that will be returned in query",
                              "isRequired": true,
                              "value": "20",
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "label": "NumberofLogs"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 6"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseLogs\r\n| where LogType in ({HBaseLogType}) and LogLevel in ({HBaseLogLevel})\r\n| take {HBaseNumberofLogs}\r\n| project TimeGenerated, LogType, LogLevel ,Message\r\n|order by TimeGenerated desc",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "HBase Logs",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Message",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "230.1429ch"
                                }
                              }
                            ]
                          }
                        },
                        "name": "HBase Logs"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseLogs\r\n| where LogType in ({HBaseLogType}) and LogLevel in ({HBaseLogLevel})\r\n| summarize count() by LogLevel, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "title": "Log Level Counts",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "INFO",
                                "label": "Info",
                                "color": "green"
                              },
                              {
                                "seriesName": "WARN",
                                "label": "Warn",
                                "color": "yellow"
                              },
                              {
                                "seriesName": "ERROR",
                                "label": "Error",
                                "color": "redBright"
                              }
                            ]
                          }
                        },
                        "name": "Log Level Counts"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "log_tab",
                    "comparison": "isEqualTo",
                    "value": "HBase"
                  },
                  "name": "HBase Logs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "parameters": [
                            {
                              "id": "d209cf7b-ddb7-4ec2-9e8b-e5772d397d5d",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnLogType",
                              "label": "LogType",
                              "type": 2,
                              "description": "Log Types that will show in the table",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHadoopAndYarnLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogType",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::1",
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 14400000
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::1",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "e3973cc7-67a7-46e3-b0e5-b6b5dd0b392e",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnLogLevel",
                              "label": "LogLevel",
                              "type": 2,
                              "description": "Log Level of Logs returned in queries",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHadoopAndYarnLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogLevel",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::1",
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "686bc2e9-cceb-45c6-86b5-de58babe71f5",
                              "version": "KqlParameterItem/1.0",
                              "name": "HadoopAndYarnNumberofLogs",
                              "type": 1,
                              "description": "Number of Logs that will be returned in query",
                              "isRequired": true,
                              "value": "20",
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "label": "NumberofLogs"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 6"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnLogs\r\n| where LogType in ({HadoopAndYarnLogType}) and LogLevel in ({HadoopAndYarnLogLevel})\r\n| take {HadoopAndYarnNumberofLogs}\r\n| project TimeGenerated, LogType, LogLevel ,Message\r\n|order by TimeGenerated desc",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "Hadoop and Yarn Logs",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Message",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "230.1429ch"
                                }
                              }
                            ]
                          }
                        },
                        "name": "Hadoop and Yarn Logs"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnLogs\r\n| where LogType in ({HadoopAndYarnLogType}) and LogLevel in ({HadoopAndYarnLogLevel})\r\n| summarize count() by LogLevel, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Log Level Counts",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "INFO",
                                "label": "Info",
                                "color": "green"
                              },
                              {
                                "seriesName": "WARN",
                                "label": "Warning",
                                "color": "yellow"
                              },
                              {
                                "seriesName": "ERROR",
                                "label": "Error",
                                "color": "redBright"
                              }
                            ]
                          }
                        },
                        "name": "Log Level Counts"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "log_tab",
                    "comparison": "isEqualTo",
                    "value": "HadoopAndYarn"
                  },
                  "name": "Hadoop And Yarn Logs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "parameters": [
                            {
                              "id": "d209cf7b-ddb7-4ec2-9e8b-e5772d397d5d",
                              "version": "KqlParameterItem/1.0",
                              "name": "HiveLogType",
                              "label": "LogType",
                              "type": 2,
                              "description": "Log Types that will show in the table",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHiveAndLLAPLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogType\r\n| order by LogType\r\n| project LogType, label=LogType, selected=row_number()",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "value": [
                                "value::all"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 14400000
                              },
                              "timeContextFromParameter": "TimeRange",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "e3973cc7-67a7-46e3-b0e5-b6b5dd0b392e",
                              "version": "KqlParameterItem/1.0",
                              "name": "HiveLogLevel",
                              "label": "LogLevel",
                              "type": 2,
                              "description": "Log Level of Logs returned in queries",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightHiveAndLLAPLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogLevel",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::1",
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "686bc2e9-cceb-45c6-86b5-de58babe71f5",
                              "version": "KqlParameterItem/1.0",
                              "name": "HiveNumberofLogs",
                              "type": 1,
                              "description": "Number of Logs that will be returned in query",
                              "isRequired": true,
                              "value": "20",
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "label": "NumberofLogs"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 6 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPLogs\r\n| where ClusterName == '{Cluster:label}'\r\n| where LogType in ({HiveLogType}) and LogLevel in ({HiveLogLevel})\r\n| take {HiveNumberofLogs}\r\n| project TimeGenerated, LogType, LogLevel ,Message\r\n|order by TimeGenerated desc",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "Hive and LLAP Logs",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Message",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "230.1429ch"
                                }
                              }
                            ]
                          }
                        },
                        "name": "Hive and LLAP Logs"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPLogs\r\n| where LogType in ({HiveLogType}) and LogLevel in ({HiveLogLevel})\r\n| summarize count() by LogLevel, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Log Level Counts",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart"
                        },
                        "name": "Log Level Counts - Copy"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "log_tab",
                    "comparison": "isEqualTo",
                    "value": "HiveAndLLAP"
                  },
                  "name": "Hive Logs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Oozie Logs",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "parameters": [
                            {
                              "id": "d209cf7b-ddb7-4ec2-9e8b-e5772d397d5d",
                              "version": "KqlParameterItem/1.0",
                              "name": "OozieLogType",
                              "label": "LogType",
                              "type": 2,
                              "description": "Log Types that will show in the table",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightOozieLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogType",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::1",
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 5184000000
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::1",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters",
                              "value": [
                                "value::all"
                              ]
                            },
                            {
                              "id": "e3973cc7-67a7-46e3-b0e5-b6b5dd0b392e",
                              "version": "KqlParameterItem/1.0",
                              "name": "OozieLogLevel",
                              "label": "LogLevel",
                              "type": 2,
                              "description": "Log Level of Logs returned in queries",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "HDInsightOozieLogs\r\n| where TimeGenerated {TimeRange}\r\n| distinct LogLevel",
                              "crossComponentResources": [
                                "{Cluster}"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "showDefault": false
                              },
                              "timeContext": {
                                "durationMs": 0
                              },
                              "timeContextFromParameter": "TimeRange",
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.hdinsight/clusters"
                            },
                            {
                              "id": "686bc2e9-cceb-45c6-86b5-de58babe71f5",
                              "version": "KqlParameterItem/1.0",
                              "name": "OozieNumberofLogs",
                              "label": "NumberofLogs",
                              "type": 1,
                              "description": "Number of Logs that will be returned in query",
                              "isRequired": true,
                              "value": "20",
                              "timeContext": {
                                "durationMs": 86400000
                              },
                              "timeContextFromParameter": "TimeRange"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters"
                        },
                        "name": "parameters - 6 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightOozieLogs\r\n| where LogType in ({OozieLogType}) and LogLevel in ({OozieLogLevel})\r\n| take {OozieNumberofLogs}\r\n| project TimeGenerated, LogType, LogLevel ,Message\r\n|order by TimeGenerated desc",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "Oozie Logs",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Message",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "230.1429ch"
                                }
                              }
                            ]
                          }
                        },
                        "name": "Hive and LLAP Logs"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightOozieLogs\r\n| where LogType in ({OozieLogType}) and LogLevel in ({OozieLogLevel})\r\n| summarize count() by LogLevel, bin(TimeGenerated, {TimeRange:grain})\r\n|order by TimeGenerated desc\r\n| take 10000",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Log Level Counts",
                          "timeContext": {
                            "durationMs": 14400000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "INFO",
                                "label": "Info",
                                "color": "green"
                              },
                              {
                                "seriesName": "WARN",
                                "label": "Warning",
                                "color": "yellow"
                              },
                              {
                                "seriesName": "Error",
                                "label": "Error",
                                "color": "redBright"
                              }
                            ]
                          }
                        },
                        "name": "Log Level Counts - Copy"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "log_tab",
                    "comparison": "isEqualTo",
                    "value": "Oozie"
                  },
                  "name": "Oozie Logs"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "Cluster",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "top_tab",
                "comparison": "isEqualTo",
                "value": "ComponentLogs"
              }
            ],
            "name": "Component Logs"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "parameters": [
                      {
                        "id": "3ec6cf7a-63dc-407f-ba90-444ccbd6a5db",
                        "version": "KqlParameterItem/1.0",
                        "name": "hive_usage",
                        "type": 1,
                        "isRequired": true,
                        "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | take 1 | count as Count ),\r\n   ( table(T2) | take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightHiveLogs';\r\nlet TableName2 = 'HDInsightHiveMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 0,
                        "resourceType": "microsoft.hdinsight/clusters"
                      }
                    ],
                    "style": "pills",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters"
                  },
                  "name": "parameters - 2"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"NumActiveSources\"\r\n|project ClusterName,MetricName, TimeGenerated, MetricValue\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "MetricName",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "20",
                        "name": "query - 0"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"NumActiveSinks\"\r\n|project ClusterName,MetricName, TimeGenerated, MetricValue\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "MetricName",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "20",
                        "name": "query - 0 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"Sink_timelineAvgTime\"\r\n|project ClusterName,MetricName, TimeGenerated, MetricValue\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "MetricName",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "20",
                        "name": "query - 0 - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"PublishAvgTime\"\r\n|project ClusterName,MetricName, TimeGenerated, MetricValue\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "MetricName",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "20",
                        "name": "query - 0 - Copy - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricName == \"SnapshotAvgTime\"\r\n|project ClusterName,MetricName, TimeGenerated, MetricValue\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "MetricName",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "MetricValue",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "20",
                        "name": "query - 0 - Copy - Copy - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricNamespace contains \"Hadoop:service=hiveserver2\"\r\n| where MetricName contains \"AvgTime\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Operation Average Latencies",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 23,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "name": "Operation Average Latencies"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where ClusterName == '{Cluster:label}'\r\n| where MetricNamespace contains \"Hadoop:service=hiveserver2\"\r\n| where MetricName contains \"NumOps\"\r\n| summarize avg(MetricValue) by MetricName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Operation  Counts",
                          "timeContext": {
                            "durationMs": 300000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Cluster}"
                          ],
                          "visualization": "linechart",
                          "chartSettings": {
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "name": "Operation Counts"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "top_tab",
                      "comparison": "isEqualTo",
                      "value": "Hive"
                    },
                    {
                      "parameterName": "hive_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "Hive Server Interactive"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "Metrics and Logs are not flowing to the Hive tables. If the cluster is version 3.6, Hive Metrics are not available. Otherwise, there may be an issue with the pipeline preventing metrics and logs from reaching your workspace. ",
                          "style": "info"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "hive_usage",
                    "comparison": "isEqualTo",
                    "value": "not present"
                  },
                  "name": "Hive Metrics N/A"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "top_tab",
              "comparison": "isEqualTo",
              "value": "Hive"
            },
            "name": "Hive Wrapper"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "usage",
        "comparison": "isEqualTo",
        "value": "present"
      },
      "name": "Usage"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "No Logs have been detected in your workspace. Please make sure you have enabled Azure Monitor for your cluster.",
              "style": "info"
            },
            "name": "text - 0"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "usage",
        "comparison": "isEqualTo",
        "value": "not present"
      },
      "name": "No Usage"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}